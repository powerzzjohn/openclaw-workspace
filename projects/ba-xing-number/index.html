<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å…«æ˜Ÿæ•°å­—æ€§æ ¼åˆ†æ | æ•°å­—èƒ½é‡å­¦</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'deep-blue': '#1a1a2e',
            'dark-purple': '#16213e',
            'accent-gold': '#ffd700',
            'accent-cyan': '#00d9ff',
            'star-purple': '#7b68ee',
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'glow': 'glow 2s ease-in-out infinite alternate',
            'fade-in': 'fadeIn 0.5s ease-out',
            'slide-up': 'slideUp 0.5s ease-out',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            },
            glow: {
              '0%': { boxShadow: '0 0 5px #ffd700, 0 0 10px #ffd700' },
              '100%': { boxShadow: '0 0 20px #ffd700, 0 0 30px #ffd700' },
            },
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
          },
        },
      },
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&display=swap');
    
    body {
      font-family: 'Noto Serif SC', serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
      min-height: 100vh;
      color: #e0e0e0;
    }
    
    .glass-card {
      background: rgba(22, 33, 62, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 215, 0, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .star-card {
      background: linear-gradient(145deg, rgba(22, 33, 62, 0.9), rgba(26, 26, 46, 0.9));
      border: 1px solid rgba(255, 215, 0, 0.3);
      transition: all 0.3s ease;
    }
    
    .star-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 40px rgba(255, 215, 0, 0.2);
      border-color: #ffd700;
    }
    
    .input-glow:focus {
      box-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
      border-color: #00d9ff;
    }
    
    .btn-gradient {
      background: linear-gradient(135deg, #ffd700 0%, #ffb700 100%);
      color: #1a1a2e;
      font-weight: 700;
      transition: all 0.3s ease;
    }
    
    .btn-gradient:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 25px rgba(255, 215, 0, 0.5);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #00d9ff 0%, #0099cc 100%);
      color: #1a1a2e;
      font-weight: 700;
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 25px rgba(0, 217, 255, 0.5);
    }
    
    .tab-active {
      border-bottom: 3px solid #ffd700;
      color: #ffd700;
    }
    
    .number-highlight {
      background: linear-gradient(135deg, #ffd700, #ffb700);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .progress-bar {
      background: linear-gradient(90deg, #ffd700, #00d9ff);
    }
    
    .star-icon {
      font-size: 1.5rem;
      margin-right: 0.5rem;
    }
    
    /* æ˜Ÿç©ºèƒŒæ™¯ */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      animation: twinkle 3s ease-in-out infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }
    
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
  <div class="stars" id="stars"></div>
  
  <div id="app" class="container mx-auto px-4 py-6 max-w-4xl">
    <!-- æ ‡é¢˜åŒºåŸŸ -->
    <header class="text-center mb-8 animate-fade-in">
      <h1 class="text-4xl md:text-5xl font-bold mb-2">
        <span class="number-highlight">å…«æ˜Ÿæ•°å­—</span>
        <span class="text-white">æ€§æ ¼åˆ†æ</span>
      </h1>
      <p class="text-accent-cyan text-lg">æ•°å­—èƒ½é‡å­¦ Â· è§£è¯»ä½ çš„å‘½è¿å¯†ç </p>
      <div class="mt-4 flex justify-center space-x-2">
        <span class="text-accent-gold">âœ¦</span>
        <span class="text-gray-400">æ¢ç´¢æ•°å­—èƒŒåçš„èƒ½é‡å¥¥ç§˜</span>
        <span class="text-accent-gold">âœ¦</span>
      </div>
    </header>

    <!-- åŠŸèƒ½åˆ‡æ¢æ ‡ç­¾ -->
    <div class="flex justify-center mb-6 animate-fade-in">
      <div class="glass-card rounded-full p-1 flex">
        <button id="tab-single" class="px-6 py-2 rounded-full tab-active transition-all" onclick="switchTab('single')">
          å•äººåˆ†æ
        </button>
        <button id="tab-match" class="px-6 py-2 rounded-full text-gray-400 transition-all" onclick="switchTab('match')">
          åŒäººåŒ¹é…
        </button>
      </div>
    </div>

    <!-- å•äººåˆ†æåŒºåŸŸ -->
    <section id="section-single" class="animate-slide-up">
      <div class="glass-card rounded-2xl p-6 md:p-8 mb-6">
        <div class="text-center">
          <label class="block text-accent-gold text-lg mb-4">è¾“å…¥æ‰‹æœºå·ç </label>
          <div class="flex flex-col md:flex-row gap-4 justify-center items-center">
            <input 
              type="tel" 
              id="phone-input" 
              placeholder="ä¾‹å¦‚ï¼š138 1234 5678" 
              class="w-full md:w-80 px-6 py-4 rounded-xl bg-dark-purple border-2 border-gray-600 text-white text-xl text-center input-glow focus:outline-none transition-all"
              maxlength="13"
            >
            <button onclick="analyzeSingle()" class="btn-gradient px-8 py-4 rounded-xl text-lg">
              å¼€å§‹åˆ†æ
            </button>
          </div>
          <p id="single-error" class="text-red-400 mt-3 hidden"></p>
        </div>
      </div>

      <!-- å•äººç»“æœåŒºåŸŸ -->
      <div id="single-result" class="hidden">
        <!-- åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <div class="text-center">
            <p class="text-gray-400 mb-2">åˆ†æå·ç </p>
            <h2 id="result-phone" class="text-3xl font-bold text-accent-gold mb-4"></h2>
            <div class="flex justify-center gap-2 flex-wrap" id="number-groups"></div>
          </div>
        </div>

        <!-- æ˜Ÿä½åˆ†å¸ƒå›¾è¡¨ -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-accent-cyan mb-4 text-center">å…«æ˜Ÿèƒ½é‡åˆ†å¸ƒ</h3>
          <div class="h-64 md:h-80">
            <canvas id="star-chart"></canvas>
          </div>
        </div>

        <!-- ä¸»å¯¼æ˜Ÿä½ -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-accent-cyan mb-4">ä¸»å¯¼æ˜Ÿä½</h3>
          <div id="dominant-stars" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>

        <!-- æ€§æ ¼ç”»åƒ -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-accent-cyan mb-4">æ€§æ ¼ç”»åƒ</h3>
          <div id="personality-profile" class="space-y-4"></div>
        </div>

        <!-- èŒä¸šå»ºè®® -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-accent-cyan mb-4">é€‚åˆçš„èŒä¸šæ–¹å‘</h3>
          <div id="career-suggestions" class="flex flex-wrap gap-2"></div>
        </div>

        <!-- äººé™…å…³ç³»å»ºè®® -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-accent-cyan mb-4">äººé™…å…³ç³»å»ºè®®</h3>
          <div id="relationship-advice" class="space-y-3"></div>
        </div>

        <!-- é‡æ–°åˆ†ææŒ‰é’® -->
        <div class="text-center">
          <button onclick="resetSingle()" class="btn-secondary px-6 py-3 rounded-xl">
            é‡æ–°åˆ†æ
          </button>
        </div>
      </div>
    </section>

    <!-- åŒäººåŒ¹é…åŒºåŸŸ -->
    <section id="section-match" class="hidden animate-slide-up">
      <div class="glass-card rounded-2xl p-6 md:p-8 mb-6">
        <div class="text-center">
          <label class="block text-accent-gold text-lg mb-4">è¾“å…¥ä¸¤ä¸ªæ‰‹æœºå·ç </label>
          <div class="flex flex-col md:flex-row gap-4 justify-center items-center mb-4">
            <input 
              type="tel" 
              id="phone1-input" 
              placeholder="ç¬¬ä¸€ä¸ªå·ç " 
              class="w-full md:w-64 px-4 py-3 rounded-xl bg-dark-purple border-2 border-gray-600 text-white text-lg text-center input-glow focus:outline-none"
              maxlength="13"
            >
            <span class="text-accent-gold text-2xl">âœ¦</span>
            <input 
              type="tel" 
              id="phone2-input" 
              placeholder="ç¬¬äºŒä¸ªå·ç " 
              class="w-full md:w-64 px-4 py-3 rounded-xl bg-dark-purple border-2 border-gray-600 text-white text-lg text-center input-glow focus:outline-none"
              maxlength="13"
            >
          </div>
          <button onclick="analyzeMatch()" class="btn-gradient px-8 py-4 rounded-xl text-lg w-full md:w-auto">
            å¼€å§‹åŒ¹é…åˆ†æ
          </button>
          <p id="match-error" class="text-red-400 mt-3 hidden"></p>
        </div>
      </div>

      <!-- åŒ¹é…ç»“æœåŒºåŸŸ -->
      <div id="match-result" class="hidden">
        <!-- åŒ¹é…åº¦åˆ†æ•° -->
        <div class="glass-card rounded-2xl p-6 mb-6 text-center">
          <h3 class="text-xl text-gray-400 mb-4">æ•°å­—èƒ½é‡åŒ¹é…åº¦</h3>
          <div class="relative inline-block">
            <svg class="w-40 h-40 transform -rotate-90">
              <circle cx="80" cy="80" r="70" stroke="#333" stroke-width="10" fill="none"/>
              <circle id="match-circle" cx="80" cy="80" r="70" stroke="url(#gradient)" stroke-width="10" fill="none"
                stroke-dasharray="440" stroke-dashoffset="440" stroke-linecap="round"/>
              <defs>
                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" style="stop-color:#ffd700"/>
                  <stop offset="100%" style="stop-color:#00d9ff"/>
                </linearGradient>
              </defs>
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
              <span id="match-score" class="text-5xl font-bold text-accent-gold">0%</span>
            </div>
          </div>
          <p id="match-level" class="text-xl text-accent-cyan mt-4"></p>
        </div>

        <!-- åŒæ–¹æ˜Ÿä½å¯¹æ¯” -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-accent-cyan mb-4 text-center">åŒæ–¹èƒ½é‡åˆ†å¸ƒå¯¹æ¯”</h3>
          <div class="h-64 md:h-80">
            <canvas id="match-chart"></canvas>
          </div>
        </div>

        <!-- äº’è¡¥æ€§åˆ†æ -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-accent-cyan mb-4">äº’è¡¥æ€§åˆ†æ</h3>
          <div id="complement-analysis" class="space-y-4"></div>
        </div>

        <!-- åˆä½œå»ºè®® -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-accent-cyan mb-4">åˆä½œå»ºè®®</h3>
          <div id="cooperation-suggestions" class="space-y-3"></div>
        </div>

        <!-- æ³¨æ„äº‹é¡¹ -->
        <div class="glass-card rounded-2xl p-6 mb-6">
          <h3 class="text-xl font-bold text-red-400 mb-4">æ³¨æ„äº‹é¡¹</h3>
          <div id="match-warnings" class="space-y-3"></div>
        </div>

        <!-- é‡æ–°åˆ†ææŒ‰é’® -->
        <div class="text-center">
          <button onclick="resetMatch()" class="btn-secondary px-6 py-3 rounded-xl">
            é‡æ–°åŒ¹é…
          </button>
        </div>
      </div>
    </section>

    <!-- å…«æ˜Ÿè¯´æ˜ -->
    <section class="mt-12 animate-fade-in">
      <div class="glass-card rounded-2xl p-6">
        <h3 class="text-xl font-bold text-accent-gold mb-6 text-center">å…«æ˜Ÿæ•°å­—èƒ½é‡è¯´æ˜</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="star-reference"></div>
      </div>
    </section>

    <!-- é¡µè„š -->
    <footer class="text-center mt-8 text-gray-500 text-sm">
      <p>å…«æ˜Ÿæ•°å­—èƒ½é‡å­¦ä»…ä¾›å‚è€ƒå¨±ä¹ï¼Œäººç”ŸæŠŠæ¡åœ¨è‡ªå·±æ‰‹ä¸­</p>
    </footer>
  </div>

  <script>
    // ==================== å…«æ˜Ÿæ•°å­—èƒ½é‡æ˜ å°„è¡¨ ====================
    const starMap = {
      // ä¼ä½ - ä¿å®ˆç¨³é‡
      '11': 'ä¼ä½', '22': 'ä¼ä½', '33': 'ä¼ä½', '44': 'ä¼ä½',
      '66': 'ä¼ä½', '77': 'ä¼ä½', '88': 'ä¼ä½', '99': 'ä¼ä½',
      // ç”Ÿæ°” - è´µäººè¿
      '14': 'ç”Ÿæ°”', '41': 'ç”Ÿæ°”', '67': 'ç”Ÿæ°”', '76': 'ç”Ÿæ°”',
      '39': 'ç”Ÿæ°”', '93': 'ç”Ÿæ°”', '28': 'ç”Ÿæ°”', '82': 'ç”Ÿæ°”',
      // å»¶å¹´ - èƒ½åŠ›å¼º
      '19': 'å»¶å¹´', '91': 'å»¶å¹´', '78': 'å»¶å¹´', '87': 'å»¶å¹´',
      '34': 'å»¶å¹´', '43': 'å»¶å¹´', '26': 'å»¶å¹´', '62': 'å»¶å¹´',
      // å¤©åŒ» - è´¢å¯Œæ™ºæ…§
      '13': 'å¤©åŒ»', '31': 'å¤©åŒ»', '68': 'å¤©åŒ»', '86': 'å¤©åŒ»',
      '49': 'å¤©åŒ»', '94': 'å¤©åŒ»', '27': 'å¤©åŒ»', '72': 'å¤©åŒ»',
      // å…­ç… - æƒ…æ„Ÿä¸°å¯Œ
      '16': 'å…­ç…', '61': 'å…­ç…', '47': 'å…­ç…', '74': 'å…­ç…',
      '38': 'å…­ç…', '83': 'å…­ç…', '29': 'å…­ç…', '92': 'å…­ç…',
      // ç¥¸å®³ - å£æ‰
      '17': 'ç¥¸å®³', '71': 'ç¥¸å®³', '89': 'ç¥¸å®³', '98': 'ç¥¸å®³',
      '46': 'ç¥¸å®³', '64': 'ç¥¸å®³', '23': 'ç¥¸å®³', '32': 'ç¥¸å®³',
      // äº”é¬¼ - æ‰å
      '18': 'äº”é¬¼', '81': 'äº”é¬¼', '79': 'äº”é¬¼', '97': 'äº”é¬¼',
      '36': 'äº”é¬¼', '63': 'äº”é¬¼', '24': 'äº”é¬¼', '42': 'äº”é¬¼',
      // ç»å‘½ - æŠ•èµ„
      '12': 'ç»å‘½', '21': 'ç»å‘½', '69': 'ç»å‘½', '96': 'ç»å‘½',
      '48': 'ç»å‘½', '84': 'ç»å‘½', '37': 'ç»å‘½', '73': 'ç»å‘½',
    };

    // å…«æ˜Ÿè¯¦ç»†ä¿¡æ¯
    const starInfo = {
      'ä¼ä½': {
        icon: 'ğŸ”ï¸',
        trait: 'ä¿å®ˆã€ç¨³é‡ã€æœ‰è€å¿ƒ',
        detail: 'åšäº‹è°¨æ…ï¼Œä¸è½»æ˜“æ”¹å˜ï¼Œé€‚åˆæŒä¹…æˆ˜',
        careers: ['ä¼šè®¡å¸ˆ', 'å®¡è®¡å¸ˆ', 'ç ”ç©¶å‘˜', 'æ¡£æ¡ˆç®¡ç†', 'è´¨é‡æ§åˆ¶'],
        relationships: 'åœ¨äººé™…å…³ç³»ä¸­è¾ƒä¸ºè¢«åŠ¨ï¼Œéœ€è¦ä¸»åŠ¨æ•å¼€å¿ƒæ‰‰',
        strengths: ['è€å¿ƒ', 'ç¨³é‡', 'æŒä¹…åŠ›', 'ç»†è‡´'],
        weaknesses: ['ä¿å®ˆ', 'å›ºæ‰§', 'ç¼ºä¹å˜é€š'],
        color: '#8b7355',
      },
      'ç”Ÿæ°”': {
        icon: 'ğŸŒŸ',
        trait: 'è´µäººè¿ã€ä¹è§‚ã€éšç¼˜',
        detail: 'å¤©ç”Ÿå¥½è¿ï¼Œé‡äº‹æ€»æœ‰è´µäººç›¸åŠ©ï¼Œå¿ƒæ€å¹³å’Œ',
        careers: ['å…¬å…³', 'é”€å”®', 'å’¨è¯¢', 'äººåŠ›èµ„æº', 'å®¢æˆ·æœåŠ¡'],
        relationships: 'äººç¼˜æä½³ï¼Œå®¹æ˜“è·å¾—ä»–äººä¿¡ä»»å’Œå¸®åŠ©',
        strengths: ['ä¹è§‚', 'äººç¼˜å¥½', 'é€‚åº”åŠ›å¼º', 'éšç¼˜'],
        weaknesses: ['éšé‡è€Œå®‰', 'ç¼ºä¹é‡å¿ƒ', 'å®¹æ˜“æ»¡è¶³'],
        color: '#4ecdc4',
      },
      'å»¶å¹´': {
        icon: 'ğŸ‘‘',
        trait: 'èƒ½åŠ›å¼ºã€è´£ä»»å¿ƒé‡ã€é¢†å¯¼',
        detail: 'å¤©ç”Ÿçš„é¢†å¯¼è€…ï¼Œæœ‰æ‹…å½“ï¼Œèƒ½åšå¤§äº‹',
        careers: ['ç®¡ç†è€…', 'ä¼ä¸šå®¶', 'é¡¹ç›®ç»ç†', 'å†›å®˜', 'æ”¿åºœå®˜å‘˜'],
        relationships: 'åœ¨å…³ç³»ä¸­å€¾å‘äºä¸»å¯¼ï¼Œéœ€è¦å­¦ä¼šå€¾å¬',
        strengths: ['é¢†å¯¼åŠ›', 'è´£ä»»å¿ƒ', 'æ‰§è¡ŒåŠ›', 'è‡ªä¿¡'],
        weaknesses: ['å¼ºåŠ¿', 'å›ºæ‰§', 'å‹åŠ›å¤§'],
        color: '#ffd93d',
      },
      'å¤©åŒ»': {
        icon: 'ğŸ’°',
        trait: 'è´¢å¯Œã€æ™ºæ…§ã€æ­£æ¡ƒèŠ±',
        detail: 'è´¢è¿äº¨é€šï¼Œèªæ˜æ™ºæ…§ï¼Œæ„Ÿæƒ…é¡ºåˆ©',
        careers: ['é‡‘è', 'æŠ•èµ„', 'åŒ»ç”Ÿ', 'æ•™è‚²', 'è‰ºæœ¯åˆ›ä½œ'],
        relationships: 'æ„Ÿæƒ…ä¸°å¯Œä¸”çœŸè¯šï¼Œå®¹æ˜“å¸å¼•ä¼˜è´¨å¯¹è±¡',
        strengths: ['æ™ºæ…§', 'è´¢è¿', 'ç›´è§‰', 'å–„è‰¯'],
        weaknesses: ['å®¹æ˜“è½»ä¿¡', 'è¿‡äºç†æƒ³åŒ–'],
        color: '#6bcf7f',
      },
      'å…­ç…': {
        icon: 'ğŸ’•',
        trait: 'æƒ…æ„Ÿä¸°å¯Œã€å¼‚æ€§ç¼˜ã€çº ç»“',
        detail: 'æ„Ÿæƒ…ç»†è…»ï¼Œå¼‚æ€§ç¼˜å¥½ï¼Œä½†å®¹æ˜“é™·å…¥æƒ…æ„Ÿçº ç»“',
        careers: ['å¿ƒç†å’¨è¯¢å¸ˆ', 'è‰ºæœ¯å®¶', 'è®¾è®¡å¸ˆ', 'ç¾å®¹', 'æ—¶å°š'],
        relationships: 'æƒ…æ„Ÿä¸°å¯Œä½†å®¹æ˜“çº ç»“ï¼Œéœ€è¦å­¦ä¼šæ–­èˆç¦»',
        strengths: ['æ•æ„Ÿ', 'å®¡ç¾', 'åŒç†å¿ƒ', 'é­…åŠ›'],
        weaknesses: ['çº ç»“', 'æƒ…ç»ªåŒ–', 'ä¼˜æŸ”å¯¡æ–­'],
        color: '#ff6b9d',
      },
      'ç¥¸å®³': {
        icon: 'ğŸ—£ï¸',
        trait: 'å£æ‰å¥½ã€çˆ±é¢å­ã€æ˜¯éå¤š',
        detail: 'èƒ½è¨€å–„è¾©ï¼Œè¡¨è¾¾èƒ½åŠ›å¼ºï¼Œä½†å®¹æ˜“è¨€å¤šå¿…å¤±',
        careers: ['å¾‹å¸ˆ', 'ä¸»æŒäºº', 'åŸ¹è®­å¸ˆ', 'è¥é”€', 'ä½œå®¶'],
        relationships: 'å–„äºè¡¨è¾¾ä½†éœ€æ³¨æ„è¯´è¯æ–¹å¼ï¼Œé¿å…å£èˆŒæ˜¯é',
        strengths: ['å£æ‰', 'è¡¨è¾¾', 'è¯´æœåŠ›', 'æœºæ™º'],
        weaknesses: ['çˆ±é¢å­', 'æ˜¯é', 'è¨€è¾å°–é”'],
        color: '#ff8c42',
      },
      'äº”é¬¼': {
        icon: 'ğŸ”®',
        trait: 'æ‰åæ¨ªæº¢ã€å˜åŒ–å¤šç«¯',
        detail: 'èªæ˜ç»é¡¶ï¼Œåˆ›æ„æ— é™ï¼Œä½†æƒ³æ³•å¤šå˜ä¸ç¨³å®š',
        careers: ['åˆ›æ„æ€»ç›‘', 'ç¨‹åºå‘˜', 'å‘æ˜å®¶', 'ç­–åˆ’', 'ç¥ç§˜å­¦'],
        relationships: 'æ€ç»´ç‹¬ç‰¹ï¼Œéœ€è¦ç†è§£åŒ…å®¹çš„ä¼´ä¾£',
        strengths: ['åˆ›æ„', 'èªæ˜', 'ç›´è§‰', 'ç‹¬ç‰¹'],
        weaknesses: ['å–„å˜', 'ä¸ç¨³å®š', 'éš¾ä»¥æ‰æ‘¸'],
        color: '#9b59b6',
      },
      'ç»å‘½': {
        icon: 'âš¡',
        trait: 'æŠ•èµ„è¿ã€å†²åŠ¨ã€æç«¯',
        detail: 'æ•¢äºå†’é™©ï¼ŒæŠ•èµ„çœ¼å…‰ç‹¬åˆ°ï¼Œä½†å®¹æ˜“å†²åŠ¨è¡Œäº‹',
        careers: ['æŠ•èµ„äºº', 'åˆ›ä¸šè€…', 'é”€å”®', 'è¿åŠ¨å‘˜', 'æ¢é™©å®¶'],
        relationships: 'çˆ±æ¨åˆ†æ˜ï¼Œéœ€è¦å­¦ä¼šæ§åˆ¶æƒ…ç»ªå’Œå†²åŠ¨',
        strengths: ['æœæ–­', 'è¡ŒåŠ¨åŠ›', 'å†’é™©ç²¾ç¥', 'ç›´æ¥'],
        weaknesses: ['å†²åŠ¨', 'æç«¯', 'é£é™©é«˜'],
        color: '#e74c3c',
      },
    };

    // å…¨å±€å˜é‡
    let singleChart = null;
    let matchChart = null;

    // ==================== åˆå§‹åŒ– ====================
    document.addEventListener('DOMContentLoaded', () => {
      initStarBackground();
      renderStarReference();
      setupPhoneInput('phone-input');
      setupPhoneInput('phone1-input');
      setupPhoneInput('phone2-input');
    });

    // åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯
    function initStarBackground() {
      const starsContainer = document.getElementById('stars');
      for (let i = 0; i < 100; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 3 + 's';
        star.style.opacity = Math.random();
        starsContainer.appendChild(star);
      }
    }

    // æ¸²æŸ“å…«æ˜Ÿè¯´æ˜
    function renderStarReference() {
      const container = document.getElementById('star-reference');
      Object.entries(starInfo).forEach(([name, info]) => {
        const card = document.createElement('div');
        card.className = 'star-card rounded-xl p-4';
        card.innerHTML = `
          <div class="flex items-center mb-2">
            <span class="star-icon">${info.icon}</span>
            <span class="font-bold text-lg" style="color: ${info.color}">${name}</span>
          </div>
          <p class="text-gray-300 text-sm mb-2">${info.trait}</p>
          <p class="text-gray-500 text-xs">${info.detail}</p>
        `;
        container.appendChild(card);
      });
    }

    // è®¾ç½®æ‰‹æœºå·è¾“å…¥æ¡†æ ¼å¼åŒ–
    function setupPhoneInput(inputId) {
      const input = document.getElementById(inputId);
      input.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length > 3 && value.length <= 7) {
          value = value.slice(0, 3) + ' ' + value.slice(3);
        } else if (value.length > 7) {
          value = value.slice(0, 3) + ' ' + value.slice(3, 7) + ' ' + value.slice(7, 11);
        }
        e.target.value = value;
      });
    }

    // ==================== æ ‡ç­¾åˆ‡æ¢ ====================
    function switchTab(tab) {
      document.getElementById('tab-single').className = tab === 'single' 
        ? 'px-6 py-2 rounded-full tab-active transition-all' 
        : 'px-6 py-2 rounded-full text-gray-400 transition-all';
      document.getElementById('tab-match').className = tab === 'match' 
        ? 'px-6 py-2 rounded-full tab-active transition-all' 
        : 'px-6 py-2 rounded-full text-gray-400 transition-all';
      
      document.getElementById('section-single').classList.toggle('hidden', tab !== 'single');
      document.getElementById('section-match').classList.toggle('hidden', tab !== 'match');
    }

    // ==================== å•äººåˆ†æåŠŸèƒ½ ====================
    
    /**
     * éªŒè¯æ‰‹æœºå·æ ¼å¼
     * @param {string} phone - æ‰‹æœºå·
     * @returns {boolean}
     */
    function validatePhone(phone) {
      const digits = phone.replace(/\D/g, '');
      return /^1[3-9]\d{9}$/.test(digits);
    }

    /**
     * æå–æ‰‹æœºå·æœ€å8ä½å¹¶åˆ†ç»„
     * @param {string} phone - æ‰‹æœºå·
     * @returns {string[]}
     */
    function extractGroups(phone) {
      const digits = phone.replace(/\D/g, '');
      const last8 = digits.slice(-8);
      const groups = [];
      for (let i = 0; i < last8.length; i += 2) {
        groups.push(last8.slice(i, i + 2));
      }
      return groups;
    }

    /**
     * åˆ†ææ•°å­—ç»„åˆå¯¹åº”çš„æ˜Ÿä½
     * @param {string[]} groups - æ•°å­—ç»„åˆæ•°ç»„
     * @returns {Object}
     */
    function analyzeStarDistribution(groups) {
      const distribution = {};
      const details = [];
      
      groups.forEach(group => {
        const star = starMap[group] || 'æœªçŸ¥';
        details.push({ group, star });
        distribution[star] = (distribution[star] || 0) + 1;
      });
      
      return { distribution, details };
    }

    /**
     * ç”Ÿæˆæ€§æ ¼ç”»åƒ
     * @param {Object} distribution - æ˜Ÿä½åˆ†å¸ƒ
     * @returns {Object}
     */
    function generatePersonalityProfile(distribution) {
      const sortedStars = Object.entries(distribution)
        .sort((a, b) => b[1] - a[1]);
      
      const dominantStar = sortedStars[0]?.[0];
      const dominantInfo = starInfo[dominantStar];
      
      // ç»¼åˆæ€§æ ¼æè¿°
      let description = '';
      const allTraits = [];
      
      sortedStars.forEach(([star, count]) => {
        if (starInfo[star]) {
          allTraits.push(...starInfo[star].strengths);
        }
      });
      
      const uniqueTraits = [...new Set(allTraits)].slice(0, 5);
      
      description = `ä½ çš„æ•°å­—èƒ½é‡æ˜¾ç¤ºï¼Œä½ æ˜¯ä¸€ä¸ª${dominantInfo?.trait || 'ç‹¬ç‰¹'}çš„äººã€‚`;
      description += `æ ¸å¿ƒç‰¹è´¨åŒ…æ‹¬ï¼š${uniqueTraits.join('ã€')}ã€‚`;
      
      if (sortedStars.length > 1) {
        description += `åŒæ—¶å—åˆ°${sortedStars[1][0]}èƒ½é‡çš„å½±å“ï¼Œè®©ä½ åœ¨${starInfo[sortedStars[1][0]]?.trait || ''}æ–¹é¢ä¹Ÿæœ‰çªå‡ºè¡¨ç°ã€‚`;
      }
      
      // èŒä¸šå»ºè®®
      const careers = [];
      sortedStars.slice(0, 2).forEach(([star]) => {
        if (starInfo[star]) {
          careers.push(...starInfo[star].careers);
        }
      });
      
      // äººé™…å…³ç³»å»ºè®®
      const relationshipTips = [];
      sortedStars.forEach(([star]) => {
        if (starInfo[star]?.relationships) {
          relationshipTips.push(starInfo[star].relationships);
        }
      });
      
      return {
        description,
        dominantStar,
        careers: [...new Set(careers)],
        relationshipTips: [...new Set(relationshipTips)],
        sortedStars,
      };
    }

    /**
     * æ‰§è¡Œå•äººåˆ†æ
     */
    function analyzeSingle() {
      const phoneInput = document.getElementById('phone-input');
      const phone = phoneInput.value.trim();
      const errorEl = document.getElementById('single-error');
      
      if (!validatePhone(phone)) {
        errorEl.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„11ä½æ‰‹æœºå·ç ';
        errorEl.classList.remove('hidden');
        return;
      }
      
      errorEl.classList.add('hidden');
      
      // åˆ†æå·ç 
      const groups = extractGroups(phone);
      const { distribution, details } = analyzeStarDistribution(groups);
      const profile = generatePersonalityProfile(distribution);
      
      // æ˜¾ç¤ºç»“æœ
      displaySingleResult(phone, groups, details, distribution, profile);
    }

    /**
     * æ˜¾ç¤ºå•äººåˆ†æç»“æœ
     */
    function displaySingleResult(phone, groups, details, distribution, profile) {
      document.getElementById('single-result').classList.remove('hidden');
      document.getElementById('result-phone').textContent = phone;
      
      // æ˜¾ç¤ºæ•°å­—åˆ†ç»„
      const groupsEl = document.getElementById('number-groups');
      groupsEl.innerHTML = details.map(({ group, star }) => `
        <div class="star-card rounded-lg px-3 py-2 text-center">
          <div class="text-accent-gold font-bold text-lg">${group}</div>
          <div class="text-xs text-gray-400">${star}</div>
        </div>
      `).join('');
      
      // æ¸²æŸ“å›¾è¡¨
      renderStarChart(distribution);
      
      // æ˜¾ç¤ºä¸»å¯¼æ˜Ÿä½
      const dominantEl = document.getElementById('dominant-stars');
      dominantEl.innerHTML = profile.sortedStars.slice(0, 3).map(([star, count], idx) => {
        const info = starInfo[star];
        const percentage = ((count / 4) * 100).toFixed(0);
        return `
          <div class="star-card rounded-xl p-4 ${idx === 0 ? 'border-accent-gold' : ''}">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center">
                <span class="text-2xl mr-2">${info?.icon || 'âœ¨'}</span>
                <span class="font-bold text-lg" style="color: ${info?.color || '#fff'}">${star}</span>
              </div>
              <span class="text-accent-gold font-bold">${percentage}%</span>
            </div>
            <div class="w-full bg-gray-700 rounded-full h-2 mb-2">
              <div class="progress-bar h-2 rounded-full" style="width: ${percentage}%"></div>
            </div>
            <p class="text-sm text-gray-300">${info?.trait || ''}</p>
          </div>
        `;
      }).join('');
      
      // æ˜¾ç¤ºæ€§æ ¼ç”»åƒ
      document.getElementById('personality-profile').innerHTML = `
        <div class="star-card rounded-xl p-4">
          <p class="text-gray-200 leading-relaxed">${profile.description}</p>
        </div>
        <div class="mt-4">
          <h4 class="text-accent-cyan mb-2">æ ¸å¿ƒä¼˜åŠ¿</h4>
          <div class="flex flex-wrap gap-2">
            ${profile.sortedStars.slice(0, 2).flatMap(([star]) => 
              starInfo[star]?.strengths.map(s => 
                `<span class="px-3 py-1 rounded-full bg-dark-purple border border-accent-gold text-accent-gold text-sm">${s}</span>`
              ) || []
            ).join('')}
          </div>
        </div>
        <div class="mt-4">
          <h4 class="text-red-400 mb-2">éœ€è¦æ³¨æ„</h4>
          <div class="flex flex-wrap gap-2">
            ${profile.sortedStars.slice(0, 2).flatMap(([star]) => 
              starInfo[star]?.weaknesses.map(w => 
                `<span class="px-3 py-1 rounded-full bg-dark-purple border border-red-400 text-red-400 text-sm">${w}</span>`
              ) || []
            ).join('')}
          </div>
        </div>
      `;
      
      // æ˜¾ç¤ºèŒä¸šå»ºè®®
      document.getElementById('career-suggestions').innerHTML = 
        profile.careers.slice(0, 8).map(career => 
          `<span class="px-4 py-2 rounded-xl bg-dark-purple border border-accent-cyan text-accent-cyan">${career}</span>`
        ).join('');
      
      // æ˜¾ç¤ºäººé™…å…³ç³»å»ºè®®
      document.getElementById('relationship-advice').innerHTML = 
        profile.relationshipTips.map(tip => 
          `<div class="flex items-start">
            <span class="text-accent-gold mr-2">âœ¦</span>
            <p class="text-gray-300">${tip}</p>
          </div>`
        ).join('');
      
      // æ»šåŠ¨åˆ°ç»“æœ
      document.getElementById('single-result').scrollIntoView({ behavior: 'smooth' });
    }

    /**
     * æ¸²æŸ“æ˜Ÿä½åˆ†å¸ƒå›¾è¡¨
     */
    function renderStarChart(distribution) {
      const ctx = document.getElementById('star-chart').getContext('2d');
      
      if (singleChart) {
        singleChart.destroy();
      }
      
      const labels = Object.keys(distribution);
      const data = Object.values(distribution);
      const colors = labels.map(star => starInfo[star]?.color || '#888');
      
      singleChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels,
          datasets: [{
            data,
            backgroundColor: colors,
            borderColor: '#1a1a2e',
            borderWidth: 2,
          }],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'right',
              labels: {
                color: '#e0e0e0',
                font: { size: 12 },
                padding: 15,
              },
            },
            tooltip: {
              callbacks: {
                label: (context) => `${context.label}: ${context.raw} ç»„`,
              },
            },
          },
        },
      });
    }

    function resetSingle() {
      document.getElementById('phone-input').value = '';
      document.getElementById('single-result').classList.add('hidden');
      document.getElementById('single-error').classList.add('hidden');
    }

    // ==================== åŒäººåŒ¹é…åŠŸèƒ½ ====================
    
    /**
     * è®¡ç®—ä¸¤ä¸ªå·ç çš„åŒ¹é…åº¦
     * @param {Object} dist1 - ç¬¬ä¸€ä¸ªå·ç çš„æ˜Ÿä½åˆ†å¸ƒ
     * @param {Object} dist2 - ç¬¬äºŒä¸ªå·ç çš„æ˜Ÿä½åˆ†å¸ƒ
     * @returns {Object}
     */
    function calculateMatchScore(dist1, dist2) {
      const stars = Object.keys({ ...dist1, ...dist2 });
      let totalDiff = 0;
      let complementary = 0;
      let conflicts = 0;
      
      const starPairs = [
        ['å¤©åŒ»', 'ç”Ÿæ°”'], ['å¤©åŒ»', 'å»¶å¹´'], ['ç”Ÿæ°”', 'å»¶å¹´'],
        ['ä¼ä½', 'å»¶å¹´'], ['ä¼ä½', 'å¤©åŒ»'],
      ];
      
      const conflictPairs = [
        ['ç»å‘½', 'å…­ç…'], ['äº”é¬¼', 'ç¥¸å®³'], ['ç»å‘½', 'äº”é¬¼'],
      ];
      
      stars.forEach(star => {
        const count1 = dist1[star] || 0;
        const count2 = dist2[star] || 0;
        totalDiff += Math.abs(count1 - count2);
        
        // æ£€æŸ¥äº’è¡¥æ€§
        starPairs.forEach(([s1, s2]) => {
          if ((dist1[s1] && dist2[s2]) || (dist1[s2] && dist2[s1])) {
            complementary++;
          }
        });
        
        // æ£€æŸ¥å†²çª
        conflictPairs.forEach(([s1, s2]) => {
          if ((dist1[s1] && dist2[s2]) || (dist1[s2] && dist2[s1])) {
            conflicts++;
          }
        });
      });
      
      // è®¡ç®—åŒ¹é…åº¦ (0-100)
      let score = 100 - (totalDiff * 5);
      score += complementary * 10;
      score -= conflicts * 15;
      
      // ç¡®ä¿åœ¨åˆç†èŒƒå›´å†…
      score = Math.max(20, Math.min(98, score));
      
      let level = '';
      if (score >= 85) level = 'å¤©ä½œä¹‹åˆ âœ¨';
      else if (score >= 70) level = 'éå¸¸èˆ¬é… ğŸ’•';
      else if (score >= 55) level = 'äº’è¡¥å…±èµ¢ ğŸ¤';
      else if (score >= 40) level = 'éœ€è¦ç£¨åˆ ğŸ’«';
      else level = 'æŒ‘æˆ˜æˆé•¿ ğŸŒ±';
      
      return { score: Math.round(score), level, complementary, conflicts };
    }

    /**
     * ç”Ÿæˆäº’è¡¥æ€§åˆ†æ
     */
    function generateComplementAnalysis(dist1, dist2) {
      const analyses = [];
      const stars1 = Object.keys(dist1);
      const stars2 = Object.keys(dist2);
      
      // æ‰¾å‡ºå„è‡ªçš„ä¸»å¯¼æ˜Ÿä½
      const dominant1 = stars1.reduce((a, b) => dist1[a] > dist1[b] ? a : b);
      const dominant2 = stars2.reduce((a, b) => dist2[a] > dist2[b] ? a : b);
      
      const info1 = starInfo[dominant1];
      const info2 = starInfo[dominant2];
      
      analyses.push({
        title: 'èƒ½é‡äº’è¡¥',
        content: `ç”²æ–¹ä¸»å¯¼${dominant1}ï¼ˆ${info1.trait}ï¼‰ï¼Œä¹™æ–¹ä¸»å¯¼${dominant2}ï¼ˆ${info2.trait}ï¼‰ï¼Œä¸¤è€…ç»“åˆå¯ä»¥å½¢æˆè‰¯å¥½çš„äº’è¡¥ã€‚`,
      });
      
      // æ£€æŸ¥å…·ä½“äº’è¡¥ç‚¹
      const complementMap = {
        'å»¶å¹´': 'ä¼ä½',
        'ä¼ä½': 'ç”Ÿæ°”',
        'ç”Ÿæ°”': 'å¤©åŒ»',
        'å¤©åŒ»': 'å»¶å¹´',
        'å…­ç…': 'å¤©åŒ»',
        'ç¥¸å®³': 'ç”Ÿæ°”',
        'äº”é¬¼': 'ä¼ä½',
        'ç»å‘½': 'å¤©åŒ»',
      };
      
      if (complementMap[dominant1] === dominant2) {
        analyses.push({
          title: 'å®Œç¾æ­é…',
          content: `${dominant1}ä¸${dominant2}æ˜¯ç†æƒ³çš„èƒ½é‡ç»„åˆï¼Œèƒ½å¤Ÿç›¸äº’ä¿ƒè¿›ã€å…±åŒæˆé•¿ã€‚`,
        });
      }
      
      return analyses;
    }

    /**
     * æ‰§è¡ŒåŒäººåŒ¹é…åˆ†æ
     */
    function analyzeMatch() {
      const phone1 = document.getElementById('phone1-input').value.trim();
      const phone2 = document.getElementById('phone2-input').value.trim();
      const errorEl = document.getElementById('match-error');
      
      if (!validatePhone(phone1) || !validatePhone(phone2)) {
        errorEl.textContent = 'è¯·è¾“å…¥ä¸¤ä¸ªæœ‰æ•ˆçš„11ä½æ‰‹æœºå·ç ';
        errorEl.classList.remove('hidden');
        return;
      }
      
      if (phone1.replace(/\D/g, '') === phone2.replace(/\D/g, '')) {
        errorEl.textContent = 'è¯·è¾“å…¥ä¸¤ä¸ªä¸åŒçš„æ‰‹æœºå·ç ';
        errorEl.classList.remove('hidden');
        return;
      }
      
      errorEl.classList.add('hidden');
      
      // åˆ†æä¸¤ä¸ªå·ç 
      const groups1 = extractGroups(phone1);
      const groups2 = extractGroups(phone2);
      const { distribution: dist1 } = analyzeStarDistribution(groups1);
      const { distribution: dist2 } = analyzeStarDistribution(groups2);
      
      // è®¡ç®—åŒ¹é…åº¦
      const matchResult = calculateMatchScore(dist1, dist2);
      const complementAnalyses = generateComplementAnalysis(dist1, dist2);
      
      // æ˜¾ç¤ºç»“æœ
      displayMatchResult(phone1, phone2, dist1, dist2, matchResult, complementAnalyses);
    }

    /**
     * æ˜¾ç¤ºåŒ¹é…ç»“æœ
     */
    function displayMatchResult(phone1, phone2, dist1, dist2, matchResult, complementAnalyses) {
      document.getElementById('match-result').classList.remove('hidden');
      
      // åŠ¨ç”»æ˜¾ç¤ºåŒ¹é…åº¦
      animateMatchScore(matchResult.score);
      document.getElementById('match-level').textContent = matchResult.level;
      
      // æ¸²æŸ“å¯¹æ¯”å›¾è¡¨
      renderMatchChart(dist1, dist2);
      
      // æ˜¾ç¤ºäº’è¡¥æ€§åˆ†æ
      document.getElementById('complement-analysis').innerHTML = complementAnalyses.map(analysis => `
        <div class="star-card rounded-xl p-4">
          <h4 class="text-accent-gold font-bold mb-2">${analysis.title}</h4>
          <p class="text-gray-300">${analysis.content}</p>
        </div>
      `).join('');
      
      // ç”Ÿæˆåˆä½œå»ºè®®
      const suggestions = generateCooperationSuggestions(dist1, dist2);
      document.getElementById('cooperation-suggestions').innerHTML = suggestions.map(s => `
        <div class="flex items-start">
          <span class="text-accent-cyan mr-2">â–¸</span>
          <p class="text-gray-300">${s}</p>
        </div>
      `).join('');
      
      // ç”Ÿæˆæ³¨æ„äº‹é¡¹
      const warnings = generateMatchWarnings(dist1, dist2);
      document.getElementById('match-warnings').innerHTML = warnings.map(w => `
        <div class="flex items-start">
          <span class="text-red-400 mr-2">âš </span>
          <p class="text-gray-300">${w}</p>
        </div>
      `).join('');
      
      // æ»šåŠ¨åˆ°ç»“æœ
      document.getElementById('match-result').scrollIntoView({ behavior: 'smooth' });
    }

    /**
     * åŠ¨ç”»æ˜¾ç¤ºåŒ¹é…åº¦
     */
    function animateMatchScore(targetScore) {
      const circle = document.getElementById('match-circle');
      const scoreEl = document.getElementById('match-score');
      const circumference = 440;
      
      let currentScore = 0;
      const duration = 1500;
      const startTime = performance.now();
      
      function update(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // ç¼“åŠ¨å‡½æ•°
        const easeOut = 1 - Math.pow(1 - progress, 3);
        currentScore = Math.round(targetScore * easeOut);
        
        scoreEl.textContent = currentScore + '%';
        const offset = circumference - (currentScore / 100) * circumference;
        circle.style.strokeDashoffset = offset;
        
        if (progress < 1) {
          requestAnimationFrame(update);
        }
      }
      
      requestAnimationFrame(update);
    }

    /**
     * æ¸²æŸ“åŒ¹é…å¯¹æ¯”å›¾è¡¨
     */
    function renderMatchChart(dist1, dist2) {
      const ctx = document.getElementById('match-chart').getContext('2d');
      
      if (matchChart) {
        matchChart.destroy();
      }
      
      const allStars = [...new Set([...Object.keys(dist1), ...Object.keys(dist2)])];
      const data1 = allStars.map(star => dist1[star] || 0);
      const data2 = allStars.map(star => dist2[star] || 0);
      
      matchChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: allStars,
          datasets: [
            {
              label: 'ç”²æ–¹',
              data: data1,
              backgroundColor: 'rgba(255, 215, 0, 0.7)',
              borderColor: '#ffd700',
              borderWidth: 1,
            },
            {
              label: 'ä¹™æ–¹',
              data: data2,
              backgroundColor: 'rgba(0, 217, 255, 0.7)',
              borderColor: '#00d9ff',
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              ticks: { color: '#e0e0e0' },
              grid: { color: 'rgba(255,255,255,0.1)' },
            },
            x: {
              ticks: { color: '#e0e0e0' },
              grid: { display: false },
            },
          },
          plugins: {
            legend: {
              labels: { color: '#e0e0e0' },
            },
          },
        },
      });
    }

    /**
     * ç”Ÿæˆåˆä½œå»ºè®®
     */
    function generateCooperationSuggestions(dist1, dist2) {
      const suggestions = [];
      const stars1 = Object.keys(dist1);
      const stars2 = Object.keys(dist2);
      
      if (stars1.includes('å»¶å¹´') || stars2.includes('å»¶å¹´')) {
        suggestions.push('åŒæ–¹ä¸­æœ‰äººå…·å¤‡é¢†å¯¼èƒ½åŠ›ï¼Œé€‚åˆç”±è¯¥æ–¹ä¸»å¯¼é‡è¦å†³ç­–ã€‚');
      }
      
      if (stars1.includes('å¤©åŒ»') || stars2.includes('å¤©åŒ»')) {
        suggestions.push('è´¢è¿èƒ½é‡è¾ƒå¼ºï¼Œé€‚åˆå…±åŒå¼€å±•å•†ä¸šé¡¹ç›®æˆ–æŠ•èµ„ã€‚');
      }
      
      if (stars1.includes('ç”Ÿæ°”') || stars2.includes('ç”Ÿæ°”')) {
        suggestions.push('è´µäººè¿æ—ºç››ï¼Œé‡åˆ°å›°éš¾æ—¶å®¹æ˜“è·å¾—å¤–éƒ¨å¸®åŠ©ã€‚');
      }
      
      if (stars1.includes('äº”é¬¼') || stars2.includes('äº”é¬¼')) {
        suggestions.push('åˆ›æ„èƒ½é‡ä¸°å¯Œï¼Œé€‚åˆä»äº‹åˆ›æ–°ç±»å·¥ä½œï¼Œä½†éœ€æ³¨æ„æ‰§è¡Œè½åœ°ã€‚');
      }
      
      suggestions.push('å®šæœŸæ²Ÿé€šï¼Œç†è§£å½¼æ­¤çš„æ€§æ ¼ç‰¹ç‚¹ï¼Œå‘æŒ¥å„è‡ªä¼˜åŠ¿ã€‚');
      suggestions.push('åœ¨é‡è¦å†³å®šå‰ï¼Œå……åˆ†è€ƒè™‘åŒæ–¹çš„æ„è§å’Œæ„Ÿå—ã€‚');
      
      return suggestions;
    }

    /**
     * ç”ŸæˆåŒ¹é…æ³¨æ„äº‹é¡¹
     */
    function generateMatchWarnings(dist1, dist2) {
      const warnings = [];
      const allStars = [...new Set([...Object.keys(dist1), ...Object.keys(dist2)])];
      
      if (allStars.includes('ç»å‘½')) {
        warnings.push('åŒæ–¹æˆ–ä¸€æ–¹æœ‰å†²åŠ¨å€¾å‘ï¼Œé‡å¤§å†³ç­–å»ºè®®å†·é™åå†åšã€‚');
      }
      
      if (allStars.includes('å…­ç…') && allStars.includes('ç¥¸å®³')) {
        warnings.push('æƒ…æ„Ÿç»†è…»ä¸å£æ‰ç›´ç‡çš„ç»„åˆï¼Œæ²Ÿé€šæ—¶éœ€æ³¨æ„è¡¨è¾¾æ–¹å¼ã€‚');
      }
      
      if (allStars.includes('äº”é¬¼') && allStars.includes('ä¼ä½')) {
        warnings.push('å˜åŒ–å¤šç«¯ä¸ä¿å®ˆç¨³é‡çš„å·®å¼‚ï¼Œéœ€è¦æ›´å¤šåŒ…å®¹å’Œç†è§£ã€‚');
      }
      
      if (warnings.length === 0) {
        warnings.push('æ¯å¯¹ç»„åˆéƒ½æœ‰ç‹¬ç‰¹ä¹‹å¤„ï¼Œä¿æŒå¼€æ”¾å¿ƒæ€ï¼Œå…±åŒæˆé•¿ã€‚');
      }
      
      return warnings;
    }

    function resetMatch() {
      document.getElementById('phone1-input').value = '';
      document.getElementById('phone2-input').value = '';
      document.getElementById('match-result').classList.add('hidden');
      document.getElementById('match-error').classList.add('hidden');
    }
  </script>
</body>
</html>