# 八星数字性格分析工具 - 产品需求文档 (PRD)

**版本**: v1.0  
**日期**: 2026-02-15  
**作者**: 虾哥  
**状态**: 初稿  

---

## 一、产品概述

### 1.1 产品定位
一款融合中国传统文化智慧的手机号码数字能量分析工具，帮助用户通过数字理解自我性格特质、优化人际关系。

### 1.2 核心理念
> **"数中有道，道在数中"**

每一个数字都承载着宇宙的能量信息。手机号码作为现代人每日高频使用的数字组合，与使用者形成深刻的能量共振。通过解读这些数字背后的规律，我们可以更好地认识自己、理解他人。

### 1.3 产品愿景
让古老的数字智慧服务于现代生活，成为每个人触手可及的性格分析与关系改善助手。

---

## 二、传统文化融合设计

### 2.1 理论根基

#### 2.1.1 河图洛书 - 数字的宇宙观
- **河图**："天一生水，地六成之"——数字与五行的对应关系
- **洛书**：九宫格的数字排列，蕴含阴阳平衡之道
- **应用**：将0-9数字映射到五行属性（金木水火土），作为基础能量属性

#### 2.1.2 易经八卦 - 八星磁场的哲学基础
八星数字学源于易经八卦思想：
| 八星 | 易经卦象 | 核心特质 | 能量属性 |
|------|----------|----------|----------|
| **伏位** | 艮卦（☶） | 稳定、保守、积累 | 土 |
| **延年** | 乾卦（☰） | 领导、责任、压力 | 金 |
| **生气** | 震卦（☳） | 活力、贵人、随缘 | 木 |
| **天医** | 坤卦（☷） | 智慧、财富、健康 | 土 |
| **六煞** | 坎卦（☵） | 情感、细腻、犹豫 | 水 |
| **祸害** | 兑卦（☱） | 口才、是非、波动 | 金 |
| **五鬼** | 离卦（☲） | 变化、才华、极端 | 火 |
| **绝命** | 巽卦（☴） | 行动、冒险、极端 | 木 |

#### 2.1.3 五行生克 - 匹配算法的理论基础
- **相生**：木→火→土→金→水→木（促进、滋养）
- **相克**：木克土、土克水、水克火、火克金、金克木（制约、平衡）
- **应用**：人际匹配时分析双方五行属性的生克关系

### 2.2 文化元素融入

#### 2.2.1 视觉设计
- **色彩体系**：采用中国传统五色（青、赤、黄、白、黑）对应五行
- **图形元素**：云纹、回纹、如意纹等传统图案作为装饰
- **字体选择**：标题使用书法字体，正文使用现代宋体

#### 2.2.2 文案调性
- **语言风格**：古韵今风，既有文化底蕴又不失现代感
- **表达方式**：避免迷信色彩，强调"工具"和"参考"属性
- **价值导向**：引导用户理性看待，用于自我认知提升

#### 2.2.3 交互仪式
- **启动引导**："静心三秒，专注当下"——引导用户以平和心态使用
- **结果呈现**：采用"签文"形式，增加文化沉浸感
- **分享设计**：生成带有传统元素的分享图（如卷轴、印章样式）

---

## 三、核心功能模块

### 3.1 单号分析系统

#### 3.1.1 功能描述
用户输入一个手机号码，系统解析其八星磁场分布，生成性格分析报告。

#### 3.1.2 用户流程
```
输入手机号 → 数字解析 → 八星分类 → 生成报告 → 保存/分享
```

#### 3.1.3 报告内容结构

**【首页：数字总览】**
- 手机号码展示
- 五行能量分布图（雷达图）
- 主导磁场标签（ strongest 1-2个）

**【第二页：八星详解】**
每个磁场的解读包含：
- **星名**：如"生气磁场"
- **属性**：五行归属 + 吉凶定性
- **位置**：在手机号中的具体位置（如第3-4位）
- **解读**：该磁场对个人性格的影响
- **建议**：如何发挥优势/规避劣势

**【第三页：综合画像】**
- 性格关键词（3-5个）
- 适合的职业方向
- 人际关系建议
- 生活注意事项

#### 3.1.4 算法逻辑

**步骤1：数字分组**
```
将11位手机号拆分为两位一组：
1XX-XXXX-XXXX → 1X | XX | XX | XX | XX | X
（注：第1位为1，参与计算）
```

**步骤2：数字能量映射**
```
八星数组对应表：
伏位：11,22,88,99,66,77,33,44
延年：19,91,78,87,34,43,26,62
生气：14,41,67,76,39,93,28,82
天医：13,31,68,86,49,94,27,72
六煞：16,61,47,74,38,83,29,92
祸害：17,71,89,98,46,64,23,32
五鬼：18,81,79,97,36,63,24,42
绝命：12,21,69,96,37,73,48,84
```

**步骤3：磁场强度计算**
- 统计各磁场出现次数
- 出现次数越多，该磁场影响越强
- 特殊位置加权（尾号权重更高）

**步骤4：五行属性聚合**
- 根据八星→五行映射，计算整体五行能量分布
- 判断五行是否平衡，哪一行偏强/偏弱

---

### 3.2 人际匹配系统

#### 3.2.1 功能描述
对比两个手机号码的八星磁场，分析双方的能量互补性和潜在冲突点。

#### 3.2.2 用户流程
```
选择/输入手机号A → 输入手机号B → 开始匹配 → 生成匹配报告 → 分享
```

#### 3.2.3 匹配维度

**【维度1：五行生克】**
- 计算双方主导五行属性
- 判断生克关系（相生/相克/比和）
- 给出关系基调评估

**【维度2：磁场互补】**
- 分析双方八星磁场的互补性
- 如：一方延年强（负责）+ 一方生气强（随和）= 互补
- 如：双方五鬼强（都善变）= 冲突风险

**【维度3：数字共振】**
- 检查双方是否有相同/相近的数字组合
- 相同数字多 = 默契度高
- 冲突数字多 = 摩擦可能

#### 3.2.4 匹配报告结构

**【匹配得分】**
- 0-100分综合评分
- 等级：天作之合(90-100)/相得益彰(70-89)/平凡相处(50-69)/需要磨合(30-49)/慎重考虑(0-29)

**【优势分析】**
- 双方的互补点
- 合作/相处的优势领域

**【注意事项】**
- 潜在的摩擦点
- 需要互相包容的地方

**【相处建议】**
- 具体场景的相处之道（工作/感情/友谊）

---

### 3.3 个人数字矩阵

#### 3.3.1 功能描述
用户可以保存多个手机号码（本人、伴侣、家人、合作伙伴等），形成个人数字矩阵，便于管理和批量分析。

#### 3.3.2 数据结构
```typescript
interface UserMatrix {
  id: string;
  userId: string;
  phoneNumber: string;
  label: string;       // 标签：本人、伴侣、合作伙伴等
  analysisResult: EightStarResult;
  createdAt: number;
  updatedAt: number;
}
```

#### 3.3.3 功能特性
- **添加号码**：输入新手机号 + 选择标签
- **快速匹配**：从已保存号码中快速选择进行匹配
- **矩阵视图**：以卡片形式展示所有保存的号码
- **删除管理**：支持删除不再需要的号码

---

## 四、用户系统

### 4.1 注册登录
- **方式**：手机号 + 短信验证码
- **流程**：
  1. 输入手机号
  2. 获取验证码
  3. 验证并登录
  4. 自动创建用户账号

### 4.2 用户数据
- **基础信息**：手机号（作为账号）、注册时间
- **扩展信息**：（可选）昵称、头像
- **数据同步**：手机号矩阵云端保存，换设备可恢复

---

## 五、界面设计规范

### 5.1 整体风格
- **基调**：雅致、东方、现代
- **氛围**：宁静、智慧、可信
- **参考**：故宫博物院APP、每日故宫

### 5.2 色彩方案

**主色调**：
- 背景色：#F5F0E8（宣纸白）
- 主色：#8B4513（檀木棕）
- 辅色：#2F4F4F（青石灰）
- 强调色：#B8860B（金箔黄）

**五行色（用于图表）**：
- 木：#228B22（森林绿）
- 火：#DC143C（朱砂红）
- 土：#D2691E（赭石色）
- 金：#FFD700（金色）
- 水：#4682B4（靛青）

### 5.3 字体规范
- **标题**：思源宋体 / 方正清刻本悦宋
- **正文**：思源黑体 / 苹方
- **数字**：DIN / Roboto Mono（等宽，清晰）

### 5.4 页面结构

**首页**：
- 顶部：Logo + 产品名称
- 中部：手机号输入框（大字号）
- 底部：开始分析按钮
- 装饰：传统纹样边框

**分析结果页**：
- 顶部：数字能量总览（雷达图）
- 中部：八星详解（可展开的卡片）
- 底部：保存/分享按钮

**匹配结果页**：
- 顶部：匹配得分（大字号）
- 中部：双方信息对比
- 底部：详细解读

---

## 六、技术实现

### 6.1 技术栈
- **前端**：React 18 + TypeScript + TailwindCSS
- **后端**：Node.js + Express
- **数据库**：SQLite（初期）→ PostgreSQL（后期）
- **部署**：Vercel（前端）+ Railway（后端）

### 6.2 核心算法模块

#### 6.2.1 八星分类算法
```typescript
const EIGHT_STAR_MAP: Record<string, string> = {
  '11': '伏位', '22': '伏位', '88': '伏位', '99': '伏位',
  '66': '伏位', '77': '伏位', '33': '伏位', '44': '伏位',
  '19': '延年', '91': '延年', '78': '延年', '87': '延年',
  // ... 其他映射
};

function analyzePhoneNumber(phone: string): EightStarResult {
  const digits = phone.split('');
  const pairs = [];
  
  for (let i = 0; i < digits.length - 1; i++) {
    pairs.push(digits[i] + digits[i+1]);
  }
  
  const result = {
    伏位: [], 延年: [], 生气: [], 天医: [],
    六煞: [], 祸害: [], 五鬼: [], 绝命: []
  };
  
  pairs.forEach((pair, index) => {
    const star = EIGHT_STAR_MAP[pair];
    if (star) {
      result[star].push({ position: index, value: pair });
    }
  });
  
  return result;
}
```

#### 6.2.2 五行属性映射
```typescript
const STAR_TO_ELEMENT: Record<string, string> = {
  '伏位': '土',
  '延年': '金',
  '生气': '木',
  '天医': '土',
  '六煞': '水',
  '祸害': '金',
  '五鬼': '火',
  '绝命': '木'
};

function calculateFiveElements(result: EightStarResult): FiveElementsResult {
  const counts = { 金: 0, 木: 0, 水: 0, 火: 0, 土: 0 };
  
  Object.entries(result).forEach(([star, items]) => {
    const element = STAR_TO_ELEMENT[star];
    counts[element] += items.length;
  });
  
  return counts;
}
```

#### 6.2.3 匹配算法
```typescript
function calculateCompatibility(phoneA: string, phoneB: string): CompatibilityResult {
  const analysisA = analyzePhoneNumber(phoneA);
  const analysisB = analyzePhoneNumber(phoneB);
  
  const elementsA = calculateFiveElements(analysisA);
  const elementsB = calculateFiveElements(analysisB);
  
  // 1. 五行生克得分（40%）
  const elementScore = calculateElementCompatibility(elementsA, elementsB);
  
  // 2. 磁场互补得分（35%）
  const starScore = calculateStarComplement(analysisA, analysisB);
  
  // 3. 数字共振得分（25%）
  const resonanceScore = calculateDigitalResonance(phoneA, phoneB);
  
  const totalScore = elementScore * 0.4 + starScore * 0.35 + resonanceScore * 0.25;
  
  return {
    score: Math.round(totalScore),
    elementAnalysis: getElementAnalysis(elementsA, elementsB),
    starAnalysis: getStarAnalysis(analysisA, analysisB),
    suggestions: generateSuggestions(totalScore, analysisA, analysisB)
  };
}
```

### 6.3 API 设计

**分析接口**
```
POST /api/analyze
Request: { phoneNumber: string }
Response: {
  success: boolean,
  data: {
    phoneNumber: string,
    eightStar: EightStarResult,
    fiveElements: FiveElementsResult,
    dominantStars: string[],
    interpretation: string,
    suggestions: string[]
  }
}
```

**匹配接口**
```
POST /api/match
Request: { phoneA: string, phoneB: string }
Response: {
  success: boolean,
  data: {
    score: number,
    level: string,  // 天作之合/相得益彰/...
    analysis: {
      element: string,
      stars: string,
      resonance: string
    },
    suggestions: string[]
  }
}
```

**用户接口**
```
POST /api/auth/login       // 登录
POST /api/auth/verify      // 验证码
GET  /api/matrix           // 获取个人矩阵
POST /api/matrix           // 添加号码
DELETE /api/matrix/:id     // 删除号码
```

---

## 七、开发计划

### 7.1 里程碑

| 阶段 | 时间 | 目标 | 产出 |
|------|------|------|------|
| **W1** | 2.17-2.23 | 核心算法 | 八星分类、五行计算、匹配算法 |
| **W2** | 2.24-3.02 | 用户系统 | 注册登录、数据持久化、个人矩阵 |
| **W3** | 3.03-3.09 | 前端界面 | 所有页面完成、响应式适配 |
| **W4** | 3.10-3.16 | 测试上线 | Bug修复、部署上线 |

### 7.2 任务分解

**W1 任务清单**
- [ ] 八星数组映射表定义
- [ ] 手机号解析算法实现
- [ ] 五行属性计算
- [ ] 磁场强度排序
- [ ] 基础解读文案撰写（八星各一篇）
- [ ] API单元测试

**W2 任务清单**
- [ ] 短信验证码接入（阿里云/腾讯云）
- [ ] 用户注册登录流程
- [ ] JWT认证实现
- [ ] 个人矩阵CRUD
- [ ] 数据库Schema设计
- [ ] 接口联调

**W3 任务清单**
- [ ] 首页设计开发
- [ ] 分析结果页
- [ ] 匹配结果页
- [ ] 个人中心页
- [ ] 分享图生成
- [ ] 动画效果实现

**W4 任务清单**
- [ ] 全流程测试
- [ ] 性能优化
- [ ] 部署脚本
- [ ] 上线前检查
- [ ] 正式发布

---

## 八、内容资源

### 8.1 八星磁场解读文案（示例）

**生气磁场（14/41/67/76/39/93/28/82）**
- **核心特质**：随缘、乐观、贵人运
- **性格描述**：天生的乐天派，遇事不钻牛角尖，容易获得他人帮助
- **优势领域**：人际关系、团队合作、创意工作
- **注意事项**：容易随遇而安，缺乏长远规划
- **相处之道**：给予足够的自由空间，不要过度约束

**延年磁场（19/91/78/87/34/43/26/62）**
- **核心特质**：责任、领导力、压力
- **性格描述**：天生的领导者，有担当，但容易给自己加压
- **优势领域**：管理岗位、创业、需要决策的工作
- **注意事项**：容易独断专行，身体容易过劳
- **相处之道**：尊重其决定权，提醒适当休息

（其他六星文案略，每个200字左右）

### 8.2 匹配解读文案模板

**高分匹配（90-100）**
> "天作之合，珠联璧合。你们的数字能量高度契合，如阴阳调和，事半功倍。"

**中高分匹配（70-89）**
> "相得益彰，互补共荣。虽有差异，但恰是优势所在，互相学习可共创佳绩。"

**中等匹配（50-69）**
> "平凡相处，需多包容。能量中性，无大起大落，平淡中见真情。"

**低分匹配（30-49）**
> "需要磨合，理解万岁。差异较多，但并非不可调和，沟通是关键。"

**极低匹配（0-29）**
> "慎重考虑，求同存异。能量冲突较多，若非必要，保持距离为宜。"

---

## 九、风险评估

### 9.1 合规风险
- **问题**：数字能量学涉及玄学内容，可能被平台认定为迷信
- **应对**：
  - 明确标注"仅供娱乐参考"
  - 避免绝对化表述（如"一定能发财"）
  - 强调性格分析属性，弱化运势预测

### 9.2 技术风险
- **问题**：算法准确性争议
- **应对**：
  - 参考主流八星数字学文献
  - 保持算法透明（可解释）
  - 接受用户反馈持续优化

### 9.3 隐私风险
- **问题**：手机号属于敏感信息
- **应对**：
  - 数据加密存储
  - 不向第三方泄露
  - 提供删除账号功能

---

## 十、附录

### 10.1 八星数组速查表

| 八星 | 数组 | 五行 | 吉凶 | 关键词 |
|------|------|------|------|--------|
| 伏位 | 11,22,88,99,66,77,33,44 | 土 | 平 | 稳定、保守 |
| 延年 | 19,91,78,87,34,43,26,62 | 金 | 吉 | 领导、责任 |
| 生气 | 14,41,67,76,39,93,28,82 | 木 | 吉 | 贵人、活力 |
| 天医 | 13,31,68,86,49,94,27,72 | 土 | 吉 | 智慧、财富 |
| 六煞 | 16,61,47,74,38,83,29,92 | 水 | 凶 | 情感、犹豫 |
| 祸害 | 17,71,89,98,46,64,23,32 | 金 | 凶 | 口才、是非 |
| 五鬼 | 18,81,79,97,36,63,24,42 | 火 | 凶 | 变化、才华 |
| 绝命 | 12,21,69,96,37,73,48,84 | 木 | 凶 | 行动、冒险 |

### 10.2 五行生克表

**相生**：木生火 → 火生土 → 土生金 → 金生水 → 水生木

**相克**：木克土 → 土克水 → 水克火 → 火克金 → 金克木

### 10.3 参考资源
- 《数字能量学》- 爱德华
- 《易经与数字能量》
- 河图洛书相关文献

---

**文档版本历史**
- v1.0 (2026-02-15): 初始版本

---

*本PRD由虾哥撰写，供八星数字性格分析工具开发使用。*
